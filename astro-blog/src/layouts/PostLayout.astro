---
import BaseLayout from './BaseLayout.astro';
import TagBadge from '../components/TagBadge.astro';
import { format } from 'date-fns';

interface Props {
  frontmatter: {
    title: string;
    date: Date;
    tags: string[];
    description?: string;
  };
}

const { frontmatter } = Astro.props;
const { title, date, tags, description } = frontmatter;
const formattedDate = format(new Date(date), 'MMMM dd, yyyy');
---

<BaseLayout title={title} description={description}>
  <article class="prose">
    <header class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold mb-2">{title}</h1>
      <time class="text-light-text-secondary dark:text-dark-text-secondary">
        {formattedDate}
      </time>
      {tags.length > 0 && (
        <div class="mt-4">
          <span class="text-light-text-secondary dark:text-dark-text-secondary text-sm mr-2">
            More posts about:
          </span>
          <div class="inline-flex flex-wrap gap-1.5">
            {tags.map((tag) => (
              <TagBadge tag={tag} />
            ))}
          </div>
        </div>
      )}
    </header>

    <div class="post-content">
      <slot />
    </div>

    <footer class="mt-12 pt-6 border-t border-light-text-secondary/20 dark:border-dark-text-secondary/20 text-sm text-light-text-secondary dark:text-dark-text-secondary">
      <p>&copy;{new Date().getFullYear()} Justin Heyes-Jones. All Rights Reserved.</p>
    </footer>
  </article>
</BaseLayout>
