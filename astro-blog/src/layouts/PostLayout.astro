---
import BaseLayout from './BaseLayout.astro';
import { format } from 'date-fns';

interface Props {
  frontmatter: {
    title: string;
    date: Date;
    tags: string[];
    description?: string;
  };
}

const { frontmatter } = Astro.props;
const { title, date, tags, description } = frontmatter;
const formattedDate = format(new Date(date), 'MMMM dd, yyyy');
---

<BaseLayout title={title} description={description}>
  <article class="prose">
    <header class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold mb-2">{title}</h1>
      <time class="text-light-text-secondary dark:text-dark-text-secondary">
        {formattedDate}
      </time>
      {tags.length > 0 && (
        <div class="mt-4 text-sm">
          <span class="text-light-text-secondary dark:text-dark-text-secondary mr-1">
            More posts about:
          </span>
          {tags.map((tag, index) => (
            <>
              <a
                href={`/tag/${tag.toLowerCase().replace(/\s+/g, '-')}`}
                class="text-light-link dark:text-dark-link hover:underline"
              >
                {tag}
              </a>
              {index < tags.length - 1 && <span class="text-light-text-secondary dark:text-dark-text-secondary">, </span>}
            </>
          ))}
        </div>
      )}
    </header>

    <div class="post-content">
      <slot />
    </div>

    <footer class="mt-12 pt-6 border-t border-light-text-secondary/20 dark:border-dark-text-secondary/20 text-sm text-light-text-secondary dark:text-dark-text-secondary">
      <p>&copy;{new Date().getFullYear()} Justin Heyes-Jones. All Rights Reserved.</p>
    </footer>
  </article>
</BaseLayout>
